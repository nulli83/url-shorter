<!doctype html>
<html lang="sv">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>shorter</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;max-width:720px;margin:40px auto;padding:0 20px}
form{display:flex;gap:8px;flex-wrap:wrap}
input,button{padding:10px;font-size:16px}
.row{display:flex;gap:8px;flex-wrap:wrap}
.result{margin-top:16px;padding:12px;background:#f5f5f5;border-radius:10px}
code{word-break:break-all}
</style>
</head>
<body>
<h1>Url/Short</h1>
<p>Paste in a an link <strong>http(s)</strong>-URL. optionally: Choose a own alias. For example  <em>My-Name</em>).</p>
<form id="shortenForm">
<input type="url" name="url" placeholder="https://exempel.se/view/my/link" required style="flex:1" />
<input type="text" name="alias" placeholder="alias" />
<button type="submit">Shorten</button>
</form>
<div id="out" class="result" style="display:none"></div>


<script>
const form = document.getElementById('shortenForm');
const out = document.getElementById('out');
form.addEventListener('submit', async (e) => {
e.preventDefault();
const data = new FormData(form);
const res = await fetch('/shorten', { method:'POST', body: data });
const json = await res.json();
if(!res.ok){
out.style.display='block';
out.innerHTML = `<strong>Wrong:</strong> ${json.error || 'Something went wrong.'}`;
return;
}
out.style.display='block';
out.innerHTML = `
<div>
<div><strong>Short link::</> <code>${json.short_url}</code></div>
<div><strong>Original:</strong>strong <code>${json.long_url}</code></div>
<div><a target="_blank" href="/stats/${json.code}">View statistics</a> ·
<a target="_blank" href="/api/qr/${json.code}">QR‑code</a></div>
</div>`;
});
</script>
</body>
</html>
