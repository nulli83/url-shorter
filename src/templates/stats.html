<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Link Stats ‚Äì {{ code }}</title>
<style>
:root { --bg:#0b0b0c; --fg:#eaeaea; --muted:#b8b8b8; --card:#161618; --accent:#4ea7ff; --border:#27272a; }
@media (prefers-color-scheme: light) {
  :root { --bg:#ffffff; --fg:#0b0b0c; --muted:#5a5a62; --card:#f7f7f8; --accent:#0b66ff; --border:#e5e7eb; }
}
* { box-sizing: border-box; }
body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--fg); margin:0; }
.container { max-width:720px; margin:48px auto; padding:0 20px; }
h1 { font-size:28px; margin:0 0 8px; letter-spacing:.2px; }
p.lead { margin:0 0 24px; color:var(--muted); }
.card { background:var(--card); border:1px solid var(--border); border-radius:14px; padding:20px; margin-bottom:20px; }
.stat { margin:8px 0; font-size:16px; }
.stat strong { color:var(--muted); font-weight:600; margin-right:8px; }
code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; word-break:break-all; }
.linkbox { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
button.copy { background:#0000; color:var(--accent); border:1px solid var(--accent); padding:8px 12px; border-radius:10px; cursor:pointer; }
.qr { display:flex; gap:16px; align-items:center; margin-top:16px; }
.qr img { border-radius:8px; }
footer { margin-top:32px; text-align:center; font-size:13px; color:var(--muted); }
a { color:var(--accent); text-decoration:underline; text-underline-offset:2px; }
</style>
</head>
<body>
<main class="container">
  <header>
    <h1>üìä Link Statistics</h1>
    <p class="lead">Here‚Äôs everything we know about your shortened URL.</p>
  </header>

  <section class="card">
    <div class="stat"><strong>Code:</strong> <code>{{ code }}</code></div>

    <div class="stat"><strong>Short link:</strong></div>
    <div class="linkbox">
      <input id="shortLink" type="text" readonly style="flex:1; min-width:220px; padding:10px; font-size:15px; border-radius:10px; border:1px solid var(--border);" value="{{ base_url }}/{{ code }}">
      <button class="copy" id="copyBtn" type="button">Copy</button>
      <a href="{{ base_url }}/{{ code }}" target="_blank" rel="noopener">Open</a>
    </div>

    <div class="stat"><strong>Original:</strong> <code>{{ long_url }}</code></div>
    <div class="stat"><strong>Created:</strong> <code>{{ created_at }}</code></div>
    <div class="stat"><strong>Clicks:</strong> <code>{{ hits }}</code></div>

    <div class="qr">
      <img src="/api/qr/{{ code }}" alt="QR code for {{ code }}" width="160" height="160">
      <p>Scan this QR code to open the short link directly on your phone.</p>
    </div>
  </section>

  <footer>
    Made with ‚ù§Ô∏è by Shorter
  </footer>
</main>

<script>
const btn = document.getElementById('copyBtn');
const input = document.getElementById('shortLink');
btn.addEventListener('click', async () => {
  input.select();
  input.setSelectionRange(0, 99999);
  try {
    await navigator.clipboard.writeText(input.value);
    btn.textContent = 'Copied!';
    setTimeout(()=>btn.textContent = 'Copy', 1200);
  } catch {
    btn.textContent = 'Failed';
    setTimeout(()=>btn.textContent = 'Copy', 1200);
  }
});
</script>
</body>
</html>
